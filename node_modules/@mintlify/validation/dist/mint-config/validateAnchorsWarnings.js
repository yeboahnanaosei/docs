import { MintValidationResults } from './common.js';
import { navigationSchema } from './schemas/navigation.js';
export function validateAnchorsWarnings(anchors, navigation) {
    const results = new MintValidationResults();
    if (anchors &&
        Array.isArray(anchors) &&
        navigation &&
        navigationSchema.safeParse(navigation).success) {
        anchors.forEach((anchor) => {
            if (!anchor.url.startsWith('mailto:') &&
                !anchor.url.startsWith('http') &&
                !anchor.url.startsWith('https') &&
                !navigation.some((nav) => pageStartsWith(nav, anchor.url))) {
                results.warnings.push('No pages in the navigation match anchor ' +
                    anchor.url +
                    ' you should have at least one page that starts with ' +
                    anchor.url);
            }
        });
    }
    return results;
}
function pageStartsWith(navEntry, prefix) {
    if (typeof navEntry === 'string') {
        return navEntry.startsWith(prefix);
    }
    else if (navEntry.pages == undefined) {
        return false;
    }
    else {
        return navEntry.pages.some((entry) => {
            return pageStartsWith(entry, prefix);
        });
    }
}
